<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# В серую не пойдём.

Будет расширение. которое будет интегрировано в аналитику также через расширение.
И фокус на аналитике
Вопрос в том как это всё поженить
Начнём с малого. (расширение) которое авторизуется и получает токен.
Далее что можно делать через расширение, оно может взять резюме и сохранить к примеру его локально и желательно куда-нибудь на сервер, там где будет аналитика.
Вопрос в том что расширение как-то через апи должно передать ИИ агенту резюме не важно в каком формате, проанализировать его и сохранить результаты для пользователя или просто показать
Это первый этап и МВП

Для такого МВП лучше сразу думать как про «связку»: расширение → ваш backend → ИИ‑агент → хранилище аналитики. Ниже — минимальная архитектура и что именно «женить» на первом этапе.[^1][^2]

## 1. Архитектура первого этапа

Компоненты:

- **Расширение (Chrome, Manifest V3)**
    - content script: читает резюме со страницы hh.ru (DOM).[^2][^3]
    - popup/options: UI «Авторизоваться», «Отправить резюме на анализ».
    - background/service worker: хранит токен пользователя, общается с вашим сервером (fetch к REST API).[^2]
- **Backend + ИИ‑агент**
    - REST API (например, FastAPI / Node.js) с endpoint'ами `POST /auth`, `POST /resume/analyze`, `GET /resume/report`.[^4][^5][^1]
    - Модуль ИИ: берёт текст резюме, делает анализ (структурирует, даёт рекомендации) и сохраняет результат в БД.[^1][^2]
- **Хранилище аналитики**
    - БД (PostgreSQL / MongoDB): таблицы `users`, `resumes`, `resume_analysis`.
    - Связь по `user_id`, который получается при авторизации расширения (не аккаунт hh, а ваш внутренний пользователь).[^4][^2]


## 2. Авторизация и токен в расширении

Вы не можете авторизоваться как «соискатель hh» через API, но можете сделать **свою** авторизацию:

- Вариант A: простой email + код/пароль в вашем сервисе, логин через popup расширения.
- Расширение отправляет данные на `POST /auth/login`, backend возвращает **JWT‑токен**, который вы храните в `chrome.storage.sync` или `local` и подставляете в заголовок `Authorization: Bearer ...` для всех запросов к своему серверу.[^4][^2]
- С точки зрения hh.ru это просто пользователь, работающий в браузере; токен относится только к вашему backend.

Так вы «вяжете» расширение и аналитику: токен = ключ к данным пользователя у вас.

## 3. Как расширение берёт резюме и отправляет на сервер

1. Пользователь открывает своё резюме на hh.ru.
2. Ваш content script:
    - через `document.querySelector` вытаскивает блоки: имя, должность, опыт, навыки, образование, текст «О себе» и т.п.[^3]
    - формирует JSON, например:
```json
{
  "source": "hh.ru",
  "url": "https://hh.ru/resume/...",
  "full_text": "... сырой текст ...",
  "fields": {
    "name": "...",
    "title": "...",
    "skills": ["Python", "SQL"],
    "experience": [ ... ]
  }
}
```

3. Отправляет это на ваш backend:
```http
POST /resume/analyze
Authorization: Bearer <token>
Content-Type: application/json

{ ...резюме... }
```

Так делают многие расширения, сохраняющие резюме с hh.ru в свои CRM/ATS‑системы, только у вас плюс — ИИ‑анализ.[^3][^1][^2]

Если хотите отправлять файл (PDF/Docx), можно использовать multipart/form‑data; это стандартный паттерн для REST‑API с бинарными данными.[^5]

## 4. Роль ИИ‑агента на backend

На стороне сервера:

- Приходит запрос `/resume/analyze` → вы:
    - сохраняете сырые данные резюме в БД;
    - вызываете ИИ‑модуль, который:
        - структурирует поля,
        - оценивает «качество» резюме,
        - даёт советы по улучшению и краткую аналитику (стек, уровень, пробелы).
- Результат записываете в таблицу `resume_analysis` и возвращаете в ответе:

```json
{
  "analysis_id": "123",
  "score_overall": 0.78,
  "summary": "Краткий вывод...",
  "recommendations": [
    "Добавить конкретику по результатам проектов",
    "Усилить блок навыков: Docker, CI/CD"
  ]
}
```

Параллельно эти данные доступны для вашей будущей «панели аналитики» в вебе.

## 5. Что показывает расширение пользователю

Для МВП достаточно:

- Кнопка «Проанализировать резюме» в popup или прямо на странице резюме (через content script‑кнопку).
- После отправки на сервер — показ результата анализа (summary, score, рекомендации) в мини‑окне popup.
- Дополнительно можно дать ссылку «Открыть подробный отчёт», который ведёт на ваш веб‑кабинет с более глубокой аналитикой (фронтенд к той же БД).[^1][^2]

Так вы «жените» расширение и аналитику: расширение только **собирает и отправляет**, а всё умное и долгоживущее — на сервере.

## 6. Важный момент: приватность и согласие

Так как резюме — личные данные:

- В интерфейсе расширения явно написать, что резюме отправляется на ваш сервер для анализа и хранения, с ссылкой на политику конфиденциальности.[^6][^7]
- Минимизировать то, что реально храните: не тянуть лишние поля, не нужные для аналитики.[^7]
- Добавить возможность «удалить мои данные» из аккаунта.

***

Если хотите, дальше могу:

- расписать структуру файлов расширения (manifest v3, content script, background, popup),
- предложить минимальный REST‑контракт (`/auth`, `/resume/analyze`, `/resume/get`) и схему БД под этот МВП.
<span style="display:none">[^10][^8][^9]</span>

<div align="center">⁂</div>

[^1]: https://tarek-ai.com/portfolio/chrome_extension/

[^2]: https://miteshboral.substack.com/p/system-design-of-a-browser-extension

[^3]: https://itsm365.com/documents_hr/Content/browser_extenstion_save_resume/browser_extenstion_4.htm

[^4]: https://github.com/cheatsnake/backend-cheats

[^5]: https://stackoverflow.com/questions/14415398/best-approach-to-design-a-rest-web-service-with-binary-data-to-be-consumed-from

[^6]: https://glopros.com/privacy-policy-for-browser-extension/

[^7]: https://skilldrop.com/articles/gdpr-privacy-considerations-resume-parser/

[^8]: https://dev.to/galihm/how-i-built-a-chrome-extension-that-parses-any-job-site-without-scraping-3ng

[^9]: https://www.linkedin.com/posts/manthan-sumbhe_softwareengineering-learningbybuilding-ats-activity-7416494214856765440-_r-b

[^10]: https://hh.ru/article/28405

